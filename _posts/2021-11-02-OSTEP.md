---
layout: post
title:  "OSTEP: Review and progress"
date:   2021-11-02 15:20:45 +0100
categories: computer-science operating-systems
---

20/Nov/2021
First day of OSTEP, reading through Intro and the first few chapters on processes.

The CPU cycle - fetch instructions, decode them, execute them.

Virtualization is the first abstraction explored:
* Processes have this illusion that they have their own private memory, called virtual memory.
* CPUs are virtualized too, processes are under the impression that CPU belongs only to them.

We will learn about file systems and concurrency (yay).

Lecture 1-1 is kinda useful as an overview of what will learn about.
1-2 is mostly about the course itself for the Uni of Wisconsin students, it's safe to skip in my opinion.

Hardware support for levels of trust
- Modes of operation (per CPU)
    * User Mode (restricted, application, non-privileged)
    * Kernel Mode (OS, unrestricted, privileged)

There is a bit set to 1 or 0 which sets the mode.

- Transition between the modes
    * Hardware instructions
        * Enter Kernel mode from user mode: trap or interrupt (in x86)
        * Return to user from kernel: return from trap
        * set up trap handlers (execute something in OS by invoking a trap handler)
          The trap handlers are set up during the time OS is booting

Modern OS has about 200 syscalls, xv6 has about 20.

System calls have their handlers in the OS, when we call them we have to call trap to, to change to kernel mode.

1. Mechanisms - The How
2. Policies - Scheduling (choose which process to run)

## First project

Trying to implement a key value store in plain C, maybe going for a bit of an overkill but I really want to do a proper one.
Using [this](https://www.andreinc.net/2021/10/02/implementing-hash-tables-in-c-part-1) guide to do it. The I just need to add the command line utility.

* Division and Multiplication hashing are used for hashing tables. Multiplication is far more popular because multiplying numbers is less "expensive" than dividing them.
* Both work for positive integers.

Man, have I got myself into a rabbit hole. Hasing is (unsuprisingly) a big area of computer science and mathematics which has produced many PhDs.

The general multiplicative hashing formula:
H_{multip}(x) = \frac{M}{W} * (Ax \mod W)

Going through Modern C at the moment to understand the language better, as I had difficulties using malloc and passing function pointers.

### Chapter 4
Process informally is a running program.
OS acheives an illusion of many programs running simultaneously by virtualizing the CPU and timesharing the resources.
There are multiple states that a process can be in, it's something I've learnt in college and that comes back to me with better context knowledge of OSes and kernel.

Process list is a data structure which stores all the processes. I vaguely remember that on Unix based systems there is a /proc directory which contains all those processes, if I am not mistaken.